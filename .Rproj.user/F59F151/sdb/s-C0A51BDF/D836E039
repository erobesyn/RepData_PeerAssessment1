{
    "contents" : "---\ntitle: \"RepData_PeerAssessment1_v2\"\nauthor: \"Robesyn\"\ndate: \"Thursday, June 11, 2015\"\noutput: html_document\n---\n\nREPRODUCIBLE RESEARCH, PROJECT 1 - DAILY ACTIVITY MEASUREMENTS\n===============================================================\n\n# A Loading and preprocessing the data\n\n## 1 Prepare, read and inspect\nPackages  , eval=F\n```{r packages installed} \nip <- as.data.frame(installed.packages()[,c(1,3:4)])\nrownames(ip) <- NULL\nip <- ip[is.na(ip$Priority),1:2,drop=FALSE]\nprint(ip, row.names=FALSE)\n```\n\n```{r install new packages if needed, echo=F}\n```\n\n```{r load packages, echo=F}\nlibrary(dplyr)\n```\n\nWorkspace\n```{r prepare workspace}\ngetwd()\ndir()\nls()\n```\n\nData\n```{r read data}\nact<-read.csv(\"activity.csv\")\nhead(act)\ntail(act)\nclass(act)\nstr(act)\n```\n\n## 2 Process/transform the data\nTurn dates into date class.\n```{r}\nact$date<-as.Date(act$date)\nstr(act)\n```\n\nReorder the columns.\n```{r}\nact<-act[, c(2,3,1)]\nhead(act)\n\nact<-tbl_df(act)\n```\n\n# B What is mean total number of steps taken per day?\n\n## 1. Create new variable, called \"totalstepsbyday\", to store the total number of steps per day. \n```{r total steps by day}\ntotalstepsbyday<-act %>% group_by(date) %>% summarize(sum= sum(steps))\ntotalstepsbyday\n\nsum<-totalstepsbyday$sum\nsum\n\nplot(totalstepsbyday)\nplot(totalstepsbyday, type=\"l\", col=\"red\", main=\"Total steps per day\")\n```\n\n## 2. Histogram of total steps per day.  \n```{r histogram total steps by day,fig.width=7,fig.height=4}\nhist(sum, col=\"red\", main=\"Histogram of steps per day\", ylab=\"Frequency\", xlab=\"Number of steps per day\", breaks=20)\n\n# store figure\npng(file=\"histogram of total steps by day.png\")\nhist(sum, col=\"red\", main=\"Histogram of steps per day\", ylab=\"Frequency\", xlab=\"Number of steps per day\", breaks=20)\ndev.off()\n``` \n\n## 3. mean and median of total steps by day\n```{r mean and median of total steps by day}\nmeanoftotalstepsbyday<-mean(totalstepsbyday$sum, na.rm=T)\nmedianoftotalstepsbyday<-median(totalstepsbyday$sum, na.rm=T)\nmeanoftotalstepsbyday\nmedianoftotalstepsbyday\n```\nThe mean, accross all days, of the total number per day is `r meanoftotalstepsbyday` and the median total number per day is `r medianoftotalstepsbyday`.  They are only 1 step per day different from each other, indicating hardly any skew in the data.\n\n```{r mean steps by day - not tasked}\nmeanstepsbyday<-act %>% group_by(date) %>% summarize(mean= mean(steps,na.rm=T))\nmeanstepsbyday\nplot(meanstepsbyday)\nplot(meanstepsbyday, type=\"l\", col=\"red\", main=\"Average number of steps per day\")\n```\n\n# C What is the average daily activity pattern?\n\n## 1 Make time series plot with average number of steps per 5-min interval, averaged across all days\n\nDo the same as above but with MEAN per 5-min interval\n```{r}\nstepsbyinterval<-act %>% group_by(interval) %>% summarize(mean= mean(steps,na.rm=T))\nstepsbyinterval\nplot(stepsbyinterval)\nplot(stepsbyinterval, type=\"l\", lwd=2, col=\"red\", main=\"All day mean number of steps by 5-minute interval\")\n\npng(file=\"mean number of steps by interval\")\nplot(stepsbyinterval, type=\"l\", lwd=2, col=\"red\", main=\"All day mean number of steps by 5-minute interval\")\ndev.off()\n```\n\n## 2. Which 5-minute interval contains maximum number of steps?\n```{r interval with maximum number of steps}\n# max value\nstepsbyinterval\nmax<-max(stepsbyinterval$mean)\nmax\n\n# position of max value\nwhich.max(stepsbyinterval$mean)   # 104th 5-minute interval\nstepsbyinterval$mean              # check: max value indeed in position 104\n```\n\n# D Imputing missing values\n\n## 1 Calculate total number of rows with NAs\n\n```{r NA}\nrows<-nrow(act)\nnarows<-sum(is.na(act))\nrows\nnarows\n```\nFrom the `r rows` rows in the dataset, `r narows` contain a missing value.\n\n```{r alternative}\nincompleterows<-act[!complete.cases(act),]    \ndim(incompleterows)       \nhead(incompleterows)\ntail(incompleterows)\n```\n\n## 2 Devise strategy for filling missing values (e.g. mean for day, mean for 5-min interval, ...)\n\nWe choose to replace NA with mean for corresponding 5-minute interval  \n\n## 3 Create new dataset with missing data filled in.\n```{r}\nactimputed<-transform(act, imputedsteps=ifelse(is.na(steps), ave(steps,interval, FUN=function(x) mean(x, na.rm=T)),steps))\nactimputed<-tbl_df(actimputed)\nView(actimputed)\n```\n### why does this not work ???\nactimputed<-act %>% group_by(interval) %>% mutate(imputed=replace(steps, is.na(steps), mean(steps, rm.na=T)))  \n\n\n## 4 Make histogram with total nr of steps per day. Calculate mean and median total steps per day. Do they differ from part B (without imputing missing values). What is impact of imputing missing data on the estimates?\n```{r}\ntotalimputedstepsbyday<-actimputed %>% group_by(date) %>% summarize(sum=sum(imputedsteps))\ntotalimputedstepsbyday\n\nsumimputedsteps<-totalimputedstepsbyday$sum\nsumimputedsteps\n\nhist(sumimputedsteps, col=\"red\", main=\"Histogram of steps, with imputation, per day\", ylab=\"Frequency\", xlab=\"Number of steps per day\", breaks=20)\n```\n\n# save figure\n```{r}\npng(file=\"histogram of total imputed steps by day.png\")\nhist(sumimputedsteps, col=\"red\", main=\"Histogram of steps, with imputation, per day\", ylab=\"Frequency\", xlab=\"Number of steps per day\", breaks=20)\ndev.off()\n```\n# E Are there differences in activity patterns between weekdays and weekends?\n\nThey, they are different in that the one with imputed values has higher counts (peak above 15 when imputing NA values). However, the form of the histogram is not different, indicating that the NA's do not introduce important bias in this case.\n\n## 1 Create factor 'part of week' (weekday or weekend)\n## 2 Make panel plot of time series with average number of steps per 5-min interval, averaged across all weekdays OR weekenddays.\n",
    "created" : 1434185827679.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3211954911",
    "id" : "D836E039",
    "lastKnownWriteTime" : 1434188731,
    "path" : "~/5 DATA PROJECTS/RepData_PeerAssessment1/RepData_PeerAssessment1_v2.Rmd",
    "project_path" : "RepData_PeerAssessment1_v2.Rmd",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_markdown"
}